@import "tailwindcss";

/* THEME CONFIGURATION
  Tailwind 4.0 syntax. 
  CRITICAL: We must use hsl(var(--variable)) to map the shadcn raw channels.
*/
@theme {
  --font-syne: var(--font-syne);
  --font-inter: var(--font-inter);

  --color-background: hsl(var(--background));
  --color-foreground: hsl(var(--foreground));
  --color-card: hsl(var(--card));
  --color-card-foreground: hsl(var(--card-foreground));
  --color-popover: hsl(var(--popover));
  --color-popover-foreground: hsl(var(--popover-foreground));
  --color-primary: hsl(var(--primary));
  --color-primary-foreground: hsl(var(--primary-foreground));
  --color-secondary: hsl(var(--secondary));
  --color-secondary-foreground: hsl(var(--secondary-foreground));
  --color-muted: hsl(var(--muted));
  --color-muted-foreground: hsl(var(--muted-foreground));
  --color-accent: hsl(var(--accent));
  --color-accent-foreground: hsl(var(--accent-foreground));
  --color-destructive: hsl(var(--destructive));
  --color-destructive-foreground: hsl(var(--destructive-foreground));
  --color-border: hsl(var(--border));
  --color-input: hsl(var(--input));
  --color-ring: hsl(var(--ring));
}

@layer base {
  :root {
    /* Graphite / Pure Black Palette */
    --background: 0 0% 0%;
    --foreground: 0 0% 98%;
    --card: 0 0% 6%;
    --card-foreground: 0 0% 98%;
    --popover: 0 0% 6%;
    --popover-foreground: 0 0% 98%;
    --primary: 0 0% 98%;
    --primary-foreground: 0 0% 4%;
    --secondary: 0 0% 12%;
    --secondary-foreground: 0 0% 98%;
    --muted: 0 0% 12%;
    /* CONTRAST FIX: Increased from 60% to 65% for better WCAG AA compliance */
    --muted-foreground: 0 0% 65%;
    --accent: 0 0% 12%;
    --accent-foreground: 0 0% 98%;
    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 0 0% 98%;
    --border: 0 0% 18%;
    --input: 0 0% 12%;
    --ring: 0 0% 75%;
    --radius: 0.375rem;
    --header-height: 4rem;
  }

  @media (min-width: 768px) {
    :root { --header-height: 5rem; }
  }

  html {
    background-color: black;
    overflow-x: hidden;
  }

  body {
    /* FIX: Changed from hsl(var(--background)) to transparent.
       This allows the z-[-1] GeometricBackground to be seen.
    */
    background-color: transparent !important;
    color: hsl(var(--foreground));
    font-family: var(--font-inter), sans-serif;
    font-size: 16px;
    line-height: 1.6;
    overflow-x: hidden;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
  }

  * {
    box-sizing: border-box;
  }

  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-syne), sans-serif;
    font-weight: 700;
    line-height: 1.2;
    letter-spacing: -0.01em;
    text-transform: lowercase;
  }

  h1 { font-size: clamp(2rem, 5vw, 3.5rem); letter-spacing: -0.02em; }
  h2 { font-size: clamp(1.5rem, 4vw, 2.5rem); }
  h3 { font-size: clamp(1.25rem, 3vw, 1.75rem); }

  p {
    font-family: var(--font-inter), sans-serif;
    line-height: 1.8;
    margin-bottom: 1.5rem;
    letter-spacing: -0.01em;
  }

  .monospace, code {
    font-family: ui-monospace, SFMono-Regular, "SF Mono", Menlo, Consolas, monospace;
  }
}

/* ANIMATIONS
  Must stay outside @layer for priority.
*/
@keyframes animate-square {
  0% { 
    transform: translateY(0) translateX(0) rotate(0deg); 
    opacity: 0.8; 
    border-radius: 0; 
  }
  50% {
    transform: translateY(-500px) translateX(50px) rotate(360deg);
    opacity: 1;
    border-radius: 25%;
  }
  100% { 
    transform: translateY(-1000px) translateX(-30px) rotate(720deg); 
    opacity: 0; 
    border-radius: 50%; 
  }
}

@keyframes scroll {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* MOVING BACKGROUND CLASSES
*/
.background {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  z-index: 0;
}

.background li {
  position: absolute;
  display: block;
  list-style: none;
  width: 20px;
  height: 20px;
  background: rgba(255, 255, 255, 0.15);
  animation: animate-square 25s ease-in-out infinite;
  bottom: -320px;
  /* OPTIMIZATION: Removed permanent will-change - browser will promote layers automatically when animating */
  /* This prevents creating GPU layers for elements with long delays before they start */
}

/* OPTIMIZATION: Only apply will-change to elements that start animating within first 6 seconds */
/* This reduces premature layer creation for delayed animations */
.background li:nth-child(1),
.background li:nth-child(2),
.background li:nth-child(3),
.background li:nth-child(4) {
  will-change: transform, opacity;
}

/* Marquee scroll animation */
.animate-scroll {
  animation: scroll 30s linear infinite;
}

/* OPTIMIZATION: Respect user motion preferences */
@media (prefers-reduced-motion: reduce) {
  .background li {
    animation: animate-square 25s ease-in-out infinite; /* Super slow instead of off */
  }

  .animate-scroll {
    animation: scroll 60s linear infinite; /* Barely moving instead of off */
  }
}

/* OPTIMIZATION: Reduced to 12 squares (from 21) for better performance */
/* Selected for best visual distribution and staggered timing */
.background li:nth-child(1) { left: 37%; width: 320px; height: 320px; animation-delay: 1s; }
.background li:nth-child(2) { left: 78%; width: 172px; height: 172px; animation-delay: 2s; }
.background li:nth-child(3) { left: 59%; width: 336px; height: 336px; animation-delay: 3s; }
.background li:nth-child(4) { left: 9%; width: 327px; height: 327px; animation-delay: 5s; }
.background li:nth-child(5) { left: 66%; width: 317px; height: 317px; animation-delay: 7s; }
.background li:nth-child(6) { left: 61%; width: 306px; height: 306px; animation-delay: 9s; }
.background li:nth-child(7) { left: 1%; width: 265px; height: 265px; animation-delay: 11s; }
.background li:nth-child(8) { left: 67%; width: 129px; height: 129px; animation-delay: 13s; }
.background li:nth-child(9) { left: 5%; width: 327px; height: 327px; animation-delay: 15s; }
.background li:nth-child(10) { left: 84%; width: 194px; height: 194px; animation-delay: 17s; }
.background li:nth-child(11) { left: 37%; width: 243px; height: 243px; animation-delay: 19s; }
.background li:nth-child(12) { left: 70%; width: 326px; height: 326px; animation-delay: 21s; }